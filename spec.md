# 推し活グッズ管理アプリ

主に BOX やガチャを管理する推し活支援アプリ。
バーコードの読み取りや製品写真を撮る事で、照合して可能な限り自動で製品を判別してタグ付けしてくれる。
使用者が収納場所をタグ付けする事で、リアルとデータをつないで、一覧で管理が加速する。

# 最低限のファイル構成

- app.py # Dash アプリのメインファイル
- components/ # UI 部分（レイアウト・カード・ボタンなど）
  - layout.py # 全体レイアウト構成
  - upload_section.py # 画像・バーコードアップロード UI
- services/ # ロジック(API 呼び出し・照合処理など）
  - barcode_lookup.py # 楽天 API などでバーコード照合
  - image_description.py # IO Intelligence API で画像説明生成
  - tag_extraction.py # タグ抽出処理
  - db_handler.py # DB 登録・取得処理
- assets/ # CSS や画像などの静的ファイル
  - styles.css # デザイン調整用 CSS
- data/ # 一時保存用のデータ(JSON や SQLite)
  - products.json # 登録されたグッズ情報
- apt.txt # 使用ライブラリ一覧（OS レベル）
- requirements.txt # 使用ライブラリ一覧（Python レベル）
- .env # API キーなどの環境変数テンプレート
- README.md # プロジェクト説明・使い方・構成
- Cursor.md # Cursor が修正した内容説明
- spec.md # Cursor に伝えるようの仕様書
- .gitignore
- Procfile # Render に起動方法を伝える

# 使用技術

- Python の Dash
- 将来的にフレームワークを変更する事も視野に入れて、ロジックを関数化する
- 公開は、GitHub にあげて、Render

# 機能要件

- 【絶対必要】
  - スマホ画面対応
  - 推し色に合わせたカラー対応（背景とかアイコンとか）
  - グッズ情報との照合
  - バーコード読み取り
  - 画像マッチ
  - プライバシーポリシー
    - 機械学習でタグ付けするがアップロードされた写真は学習させません告知
  - 検索
  - SNS シェア
    - グッズ GET 投稿
    - 求＆譲の交換希望投稿
- 【第 2 フェーズ】
  - ダッシュボード
  - 家計簿的に推しに使用した金額
  - 推し色割合等のタグ分析
  - 推し初めて何日
  - ダブり&交換 OK 数管理
  - 収納場所管理
    - 番号割当で収納場所自由入力
    - 規定サイズタグを使用して、収納枚数計算（例：缶バッチ 24x24 が収納するのに仕分けクリアファイルが何枚必要か？全数は？）
- 【第 3 フェーズ】
  - 背景画像に合わせて、管理用に撮影したグッズ画像を貼り付けて、推し空間作成

# サイトマップ

- HOME
  - 写真を登録
  - 一覧
  - ダッシュボード
  - 推し部屋
  - 設定
    - アカウント情報
    - 収納場所タグ編集
    - 優先・任意タグ設定
    - テーマーカラー変更
    - プレミアムへ移行
    - お問い合わせ
    - バージョン情報
    - プライバシーポリシー
    - 利用規約
    - データを全て削除
    - 退会

# エラー対策

## エラー 1 個目

pyzbar が依存する zbar を Render にインストールさせるため、プロジェクト直下に apt.txt を作成して以下を記載します：

```
libzbar0
libzbar-dev
```

## エラー 2 個目

Flask Dash は内部で Flask を使っていますが、Render での依存解決を安定させるために明示的に書いておくと安心です。

gunicorn Render は本番環境で python app.py ではなく WSGI サーバーを使うのが推奨です。 → gunicorn app:app のように起動することで安定稼働します。

Procfile の基本
ファイル名は必ず Procfile（拡張子なし）

アプリのルートディレクトリに置く必要があります

中身は「プロセスタイプ: 実行コマンド」という形式で書きます

例（Dash アプリの場合）：

コード
web: gunicorn app:server
✅ どういう意味？
web: → 「Web サーバーとして動かすプロセス」という意味。外部からの HTTP リクエストを受け付けるのはこのプロセスだけです。

gunicorn app:server → gunicorn という本番用 WSGI サーバーを使って、app.py 内の server という Flask インスタンスを起動する、という指示。 Dash アプリでは通常こう書きます：

python
app = dash.Dash(**name**)
server = app.server # ← これを定義しておく
